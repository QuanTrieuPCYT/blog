---
layout: post
title: Bypass kh·∫£o s√°t tr√™n web c·ªßa tr∆∞·ªùng ƒë·∫°i h·ªçc
description: M√¨nh ƒë√£ bypass th√†nh c√¥ng kh·∫£o s√°t tr√™n web c·ªßa ƒë·∫°i h·ªçc m√¨nh ƒëang theo h·ªçc nh∆∞ n√†o?
date: 2024-11-26 11:34:30 +0700
image: /images/survey-required.png
---
Nh∆∞ c√°c b·∫°n ƒë√£ bi·∫øt (ho·∫∑c kh√¥ng?), m√¨nh ƒëang theo h·ªçc t·∫°i m·ªôt tr∆∞·ªùng ƒë·∫°i h·ªçc li√™n quan ƒë·∫øn c√¥ng ngh·ªá kh√° l√† m·ªõi ·ªü Vi·ªát Nam. M√¨nh s·∫Ω t·∫°m th·ªùi kh√¥ng nh·∫Øc t·ªõi t√™n ·ªü trong post n√†y v√¨ m·ªôt v√†i l√≠ do, n·∫øu b·∫°n mu·ªën bi·∫øt m√¨nh h·ªçc tr∆∞·ªùng g√¨ th√¨ gh√© qua trang ch·ªß (portfolio) c·ªßa m√¨nh th√¨ s·∫Ω bi·∫øt: [**https://qtpc.tech**](https://qtpc.tech) üòÇ

## V·∫•n ƒë·ªÅ n√≥ l√† nh∆∞ n√†y...
Tr∆∞·ªùng m√¨nh n√≥ c√≥ c√°i web, kh√° l√† "x·ªãn", nh∆∞ng c√≥ c√°i c∆° ch·∫ø m√† m√¨nh kh√¥ng th·∫•y m·∫∑n m√† l·∫Øm, n√≥ nh∆∞ n√†y:

![image.png](/images/survey-required.png)

M·ªói m·ªôt l·∫ßn v√†o web, h·ªá th·ªëng s·∫Ω b·∫Øt sinh vi√™n th·ª±c hi·ªán t·∫•t c·∫£ c√°c kh·∫£o s√°t hi·ªán t·∫°i c·ªßa tr∆∞·ªùng, h·ªçc sinh ph·∫£i th·ª±c hi·ªán h·∫øt th√¨ UI ch√≠nh c·ªßa web m·ªõi hi·ªán cho sinh vi√™n thao t√°c.

Th·ª±c s·ª± m√¨nh th·∫•y ƒëi·ªÅu n√†y **kh√°** l√† b·∫•t ti·ªán, t·∫°i c√°i web th·ª±c hi·ªán kh·∫£o s√°t c·ªßa tr∆∞·ªùng th·ª±c s·ª± l·ªè üòÇ, m·ªôt l·ªói v√≠ d·ª• l√† khi m√¨nh ƒë√£ ho√†n th√†nh xong m·ªôt kh·∫£o s√°t v√† apply, nh∆∞ng h·ªá th·ªëng c·ª© khƒÉng khƒÉng th√¥ng b√°o r·∫±ng m√¨nh ch∆∞a ho√†n th√†nh kh·∫£o s√°t (yes, m√¨nh ƒë√£ ƒëi·ªÅn v√†o t·∫•t c·∫£ c√°c √¥ ch·ªØ v√† ch·ªçn t·∫•t c·∫£ c√°c √¥ tr√≤n, k·ªÉ c·∫£ c√°c √¥ kh√¥ng b·∫Øt bu·ªôc)

![image.png](/images/survey-not-completed.png)

M√¨nh l√† m·ªôt ng∆∞·ªùi kh√° l√† ch·ªân chu, th·∫≠t th√† v√† c·∫©n th·∫≠n (c√≥ th·ªÉ l√† real ho·∫∑c üß¢, t√πy b·∫°n ƒë√°nh gi√° ü•≤) trong nh·ªØng l√∫c th·ª±c hi·ªán nh·ªØng ƒë·ª£t kh·∫£o s√°t nh∆∞ n√†y, n√™n m√¨nh th∆∞·ªùng s·∫Ω d√†nh th·ªùi gian r·∫£nh (khi b·∫£n th√¢n th·ª±c s·ª± b√¨nh tƒ©nh) ƒë·ªÉ l√†m. C√≤n nh·ªØng l√∫c m√¨nh c·∫ßn v√†o web tr∆∞·ªùng ƒë·ªÉ l√†m nh·ªØng vi·ªác c·∫ßn thi·∫øt kh√°c (check l·ªãch h·ªçc, g·ª≠i form, check ti·ªÅn h·ªçc, etc), th√¨ m√¨nh **th·ª±c s·ª± kh√¥ng mu·ªën th·ª±c hi·ªán ƒëi·ªÅn kh·∫£o s√°t**.

Nhi·ªÅu b·∫°n s·∫Ω nghƒ© r·∫±ng: "·ª¶a v·∫≠y b·∫°n s·∫Ω ch·∫°y c√°i script n√†y m√£i tr√™n web tr∆∞·ªùng ƒë·ªÉ kh√¥ng ph·∫£i ƒëi·ªÅn kh·∫£o s√°t h·∫£? üò©". Kh√¥ng kh√¥ng, nh∆∞ ƒë√£ n√≥i ·ªü tr√™n, m√¨nh mu·ªën th·ª±c s·ª± l√†m kh·∫£o s√°t v√†o nh·ªØng l√∫c r·∫£nh v√† th·ª±c s·ª± b√¨nh tƒ©nh nh·∫•t, khi kh√¥ng c√≥ vi·ªác g·∫•p hay deadline ·∫≠p ƒë·∫øn. M√¨nh s·∫Ω ch·ªâ k√≠ch ho·∫°t c√°i script n√†y khi kh√¥ng mu·ªën th·ª±c hi·ªán kh·∫£o s√°t v√† s·∫Ω t·∫Øt script v√† th·ª±c hi·ªán v√†o l√∫c kh√°c.

V·∫≠y n√™n...

## Ti·∫øn h√†nh vi·∫øt userscript bypass th√¥ng b√°o kh·∫£o s√°t
M√¨nh kh√¥ng ch·∫Øc l√† nh·ªØng th·ª© m√¨nh vi·∫øt d∆∞·ªõi ƒë√¢y c√≥ 100% ƒë√∫ng hay kh√¥ng, t·∫°i m√¨nh kh√¥ng ph·∫£i d√¢n chuy√™n üò≠ c√≥ g√¨ g√≥p √Ω s·ª≠a ƒë·ªïi n·∫øu ƒë∆∞·ª£c nha

Behavior m·∫∑c ƒë·ªãnh c·ªßa trang nh∆∞ m√¨nh th·∫•y b·∫±ng m·∫Øt ƒë∆∞·ª£c nh∆∞ sau:
- Khi v√†o web, web s·∫Ω check xem sinh vi√™n c√≥ c√°c ƒë·ª£t kh·∫£o s√°t n√†o ch∆∞a th·ª±c h√†nh kh√¥ng
- N·∫øu c√≥, show m·ªôt popup native alert b√°o "B·∫°n c·∫ßn ho√†n th√†nh c√°c phi·∫øu kh·∫£o s√°t sau." v·ªõi m·ªôt n√∫t OK.
- Trang web s·∫Ω ƒë·ª£i v√†i gi√¢y v√† redirect ra trang th·ª±c hi·ªán kh·∫£o s√°t, tr√™n link c√≥ token (ki·ªÉu d·∫°ng nh∆∞ session ID !? m√¨nh kh√¥ng c√≥ r√µ l·∫Øm) v√† ID ng∆∞·ªùi th·ª±c hi·ªán kh·∫£o s√°t.

![image.png](/images/url_survey.png)

Ti·∫øp theo, m√¨nh ti·∫øn h√†nh inspect website v√† t√¨m ƒë∆∞·ª£c nh·ªØng script js ƒë∆∞·ª£c load khi b·∫Øt ƒë·∫ßu load, m·ª•c ƒë√≠ch l√† ƒë·ªÉ t√¨m xem ƒë√¢u l√† ƒë·ªëi t∆∞·ª£ng ƒë√£ load c√°i alert box:

![image.png](/images/inspect_uni_web.png)

M√¨nh t√¨m ƒë∆∞·ª£c m·ªôt file c√≥ v·∫ª l√† ƒë·ªëi t∆∞·ª£ng hi·ªán alert box cho ng∆∞·ªùi d√πng mang t√™n `systemroot.js`

![image.png](/images/alert_box_code.png)

V·∫≠y l√† m√¨nh ƒë√£ n·∫Øm ƒë∆∞·ª£c r·∫±ng, function `ChuyenChucNang()` n·∫Øm vai tr√≤ hi·ªán alert box v√† redirect sinh vi√™n t·ªõi web ƒë·ªÉ th·ª±c hi·ªán kh·∫£o s√°t.

Gi·∫£i th√≠ch ƒë∆°n gi·∫£n, function n√†y g·ª≠i m·ªôt HTTP POST request ƒë·∫øn API. POST request n√†y bao g·ªìm action `CMS_TOKEN/CreateTicket`, ID c·ªßa user th·ª±c hi·ªán, ID c·ªßa app v√† ticket ID (l·∫•y b·∫±ng `edu.util.uuid()`). Khi POST request th√†nh c√¥ng (`data.Success`), v√† trong request ƒë√≥ c√≥ id kh·∫£o s√°t (`data.Id`) th√¨ ti·∫øn h√†nh hi·ªán alert box v√† ƒëi·ªÅu h∆∞·ªõng ng∆∞·ªùi d√πng ƒë·∫øn link kh·∫£o s√°t.

Th·ª±c ra l√∫c ƒë·∫ßu, m√¨nh kh√¥ng ƒë·ªçc kƒ© code n√™n m√¨nh ƒë√£ nghƒ© l√† ch·ªâ c·∫ßn override ƒë∆∞·ª£c alert box l√† skip ƒë∆∞·ª£c c·∫£ qu√° tr√¨nh üòÇ code nh∆∞ sau:
```js
// Override the native alert function
window.alert = function() {
    // Prevent the alert from showing
    console.log('Alert blocked!');
};
```

ƒê√∫ng l√† n√≥ c√≥ block ƒë∆∞·ª£c alert th·∫≠t, nh∆∞ng v·ªÅ sau th√¨ web v·∫´n redirect m√¨nh v·ªÅ link kh·∫£o s√°t. Hihi, m√¨nh n·∫∑n √≥c ra v√†i ph√∫t th√¨ nghƒ© ra ƒë∆∞·ª£c m·ªôt gi·∫£i ph√°p ·ªïn √°p nh·∫•t: **Override h·∫≥n lu√¥n c√°i function `ChuyenChucNang()` n√†y**, t·∫°i m√¨nh th·∫•y c√°i function n√†y kh√¥ng l√†m c√°i g√¨ qu√° quan tr·ªçng ngo√†i query tr·∫°ng th√°i th·ª±c hi·ªán kh·∫£o s√°t c·ªßa ng∆∞·ªùi d√πng.

Cu·ªëi c√πng, ƒë√¢y l√† s·∫£n ph·∫©m sau c√πng c·ªßa m√¨nh:

```js
(function() {
    'use strict'; // ch·∫ø ƒë·ªô nghi√™m ng·∫∑t

    // ƒê·ª£i script load
    const waitForScript = setInterval(() => {
        // Check ƒë·ªëi t∆∞·ª£ng edu xem ƒë√£ ƒë∆∞·ª£c load ch∆∞a, check xem ChuyenChucNang() c√≥ ph·∫£i l√† m·ªôt h√†m t·ªìn t·∫°i hay kh√¥ng
        if (typeof edu !== "undefined" && edu.system && typeof edu.system.ChuyenChucNang === "function") {
            // Th·ª±c hi·ªán ghi ƒë√® khi ƒë√£ t√¨m th·∫•y ƒë·ªëi t∆∞·ª£ng
            clearInterval(waitForScript);

            // L∆∞u h√†m g·ªëc v√†o originalChuyenChucNang, ph√≤ng khi sau n·∫øu c√≥ mu·ªën d√πng l·∫°i trong web console
            const originalChuyenChucNang = edu.system.ChuyenChucNang;

            // Ghi ƒë√® h√†m ChuyenChucNang() g·ªëc c·ªßa web b·∫±ng phi√™n b·∫£n c·ªßa userscript n√†y
            edu.system.ChuyenChucNang = function() {
                // n·∫øu h√†m ChuyenChucNang() ƒë∆∞·ª£c g·ªçi sau khi ghi ƒë√®, thay v√¨ ƒë∆∞a ng∆∞·ªùi d√πng ƒë·∫øn trang kh·∫£o s√°t th√¨ n√≥ s·∫Ω in ra console nh∆∞ sau
                console.log("ChuyenChucNang was called, but execution is blocked.");
            };

            // th√¥ng b√°o trong console r·∫±ng h√†m ChuyenChucNang() ƒë√£ ƒë∆∞·ª£c ghi ƒë√® th√†nh c√¥ng
            console.log("Userscript: ChuyenChucNang method has been successfully overridden.");
        }
    }, 100); // Check m·ªói 100ms (1/10 gi√¢y)

    // Gi·ªõi h·∫°n th·ªùi gian ki·ªÉm tra h√†m l√∫c ƒë·∫ßu c√≤n 10 gi√¢y.
    setTimeout(() => {
        clearInterval(waitForScript);
        console.log("Userscript: Stopped checking for ChuyenChucNang after timeout.");
    }, 10000);
})();
```

C√°c b·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng c√°i userscript n√†y b·∫±ng c√°ch t·∫£i t·ª´ link [**https://stash.qtpc.tech/skipchuyenchucnang.user.js**](https://stash.qtpc.tech/skipchuyenchucnang.user.js), v√† s·ª≠ d·ª•ng v·ªõi tr√¨nh ƒë·ªçc userscript c√°c b·∫°n mu·ªën (v√≠ d·ª• nh∆∞ [**Tampermonkey**](https://www.tampermonkey.net), ho·∫∑c n·∫øu b·∫°n x√†i Safari th√¨ [**Userscripts**](https://github.com/quoid/userscripts)).

**L∆ØU √ù:** Copy c√°i code snippet tr√™n v√† paste kh√¥ng v√†o s·∫Ω kh√¥ng ch·∫°y ƒë∆∞·ª£c, t·∫°i n√≥ thi·∫øu nh·ªØng metadata c·∫ßn thi·∫øt ƒë·ªÉ cho tr√¨nh userscript c√≥ th·ªÉ ho·∫°t ƒë·ªông.

**Alright byee, h·∫πn g·∫∑p l·∫°i c√°c b·∫°n ·ªü m·ªôt post kh√°c ‚≠êÔ∏è**